<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>BJSM continuous (snSMART with three active treatments and a continuous outcome design) — BJSM_c • snSMART</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="BJSM continuous (snSMART with three active treatments and a continuous outcome design) — BJSM_c"><meta property="og:description" content="BJSM (Bayesian Joint Stage Modeling) method that borrows information across both stages
to estimate the individual response rate of each treatment (with continuous
outcome and a mapping function)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">snSMART</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/sidiwang/snSMART/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>BJSM continuous (snSMART with three active treatments and a continuous outcome design)</h1>
    <small class="dont-index">Source: <a href="https://github.com/sidiwang/snSMART/blob/HEAD/R/BJSM_c.R" class="external-link"><code>R/BJSM_c.R</code></a></small>
    <div class="hidden name"><code>BJSM_c.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>BJSM (Bayesian Joint Stage Modeling) method that borrows information across both stages
to estimate the individual response rate of each treatment (with continuous
outcome and a mapping function).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">BJSM_c</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">xi_prior.mean</span>,</span>
<span>  <span class="va">xi_prior.sd</span>,</span>
<span>  <span class="va">phi3_prior.sd</span>,</span>
<span>  <span class="va">n_MCMC_chain</span>,</span>
<span>  <span class="va">n.adapt</span>,</span>
<span>  <span class="va">MCMC_SAMPLE</span>,</span>
<span>  ci <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  <span class="va">n.digits</span>,</span>
<span>  thin <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  BURN.IN <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  cran_check_option <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  jags.model_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  coda.samples_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for BJSM_c</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for summary.BJSM_c</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for BJSM_c</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>trial ddatset with columns: <code>id, trt1</code> (treatment 1), <code>stage1outcome, stay</code>
(stay = 1 if patient stay on the same treatment in stage 2, otherwise stay = 0),
<code>trt2</code> (treatment 2), <code>stage2outcome</code></p></dd>


<dt>xi_prior.mean</dt>
<dd><p>a 3-element vector of mean of the prior distributions
(normal distribution) for <code>xi</code>s (treatment effect). Please check the <code>Details</code>
section for more explaination</p></dd>


<dt>xi_prior.sd</dt>
<dd><p>a 3-element vector of standard deviation of the prior distributions
(normal distribution) for <code>xi</code>s (treatment effect). Please check the <code>Details</code>
section for more explaination</p></dd>


<dt>phi3_prior.sd</dt>
<dd><p>standard deviation of the prior distribution (folded normal
distribution) of <code>phi3</code> (if the patient stays on the same treatment, <code>phi3</code>
is the cumulative effect of stage 1 that occurs on the treatment longer term).
Please check the <code>Details</code> section for more explaination</p></dd>


<dt>n_MCMC_chain</dt>
<dd><p>number of MCMC chains, default to 1</p></dd>


<dt>n.adapt</dt>
<dd><p>the number of iterations for adaptation</p></dd>


<dt>MCMC_SAMPLE</dt>
<dd><p>number of iterations for MCMC</p></dd>


<dt>ci</dt>
<dd><p>coverage probability for credible intervals, default = 0.95</p></dd>


<dt>n.digits</dt>
<dd><p>number of digits to keep in the final estimation of treatment effect</p></dd>


<dt>thin</dt>
<dd><p>thinning interval for monitors</p></dd>


<dt>BURN.IN</dt>
<dd><p>number of burn-in iterations for MCMC</p></dd>


<dt>cran_check_option</dt>
<dd><p>TRUE or FALSE. If FALSE, the algorithm will fit a
model like usual. This should be the default for all model fitting.
If TRUE, the model fitting is bypassed to pass CRAN check.</p></dd>


<dt>jags.model_options</dt>
<dd><p>a list of optional arguments that are passed to <code>jags.model()</code> function.</p></dd>


<dt>coda.samples_options</dt>
<dd><p>a list of optional arguments that are passed to <code>coda.samples()</code> function.</p></dd>


<dt>verbose</dt>
<dd><p>TRUE or FALSE. If FALSE, no function message and progress bar will be
printed.</p></dd>


<dt>...</dt>
<dd><p>further arguments. Not currently used.</p></dd>


<dt>object</dt>
<dd><p>object to summarize.</p></dd>


<dt>x</dt>
<dd><p>object to print</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <dl><dt>posterior_sample</dt>
<dd><p>an <code>mcmc.list</code> object generated through the <code>coda.samples()</code> function,
which includes posterior samples of the link parameters and response rates generated through the MCMC
process</p></dd>

<dt>mean_estimate</dt>
<dd><p>BJSM estimate of each parameter:</p><ol><li><p><code>phi1</code> - lingering effect of the first treatment</p></li>
<li><p><code>phi3</code> - if the patient stays on the same treatment, <code>phi3</code> is the cumulative effect of stage 1 that occurs on the treatment longer term</p></li>
<li><p><code>xi_j</code> - the expected effect of treatment j, j = 1, 2, 3 in the first stage</p></li>
<li><p><code>rho</code> is the inverse of the variance-covariance matrix of the multivariate distribution, first parameter indicates whether patient stayed on the same treatment (2) or not (1), second parameter
indicates the row number of the inverse of variance-covariance matrix, and the third parameter indicates the column number of the inverse of the variance-covariance matrix</p></li>
</ol></dd>

<dt>ci_estimate</dt>
<dd><p>x% credible interval for each parameter. By default round to
2 decimal places, if more decimals are needed, please access the results by
<code>[YourResultName]$ci_estimates$CI_low</code> or <code>[YourResultName]$ci_estimates$CI_high</code></p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>section 2.2.1 and 2.2.2 of the paper listed under <code>reference</code> provides a detailed
description of the assumptions and prior distributions of the model.</p>
<p>Note that this package does not include the JAGS library, users need to install JAGS separately. Please check this page for more details: <a href="https://sourceforge.net/projects/mcmc-jags/" class="external-link">https://sourceforge.net/projects/mcmc-jags/</a></p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Hartman, H., Tamura, R.N., Schipper, M.J. and Kidwell, K.M., 2021. Design and analysis considerations for utilizing a mapping function in a small sample,
sequential, multiple assignment, randomized trials with continuous outcomes. Statistics in Medicine, 40(2), pp.312-326.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">trialData</span> <span class="op">&lt;-</span> <span class="va">trialDataMF</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">BJSM_result</span> <span class="op">&lt;-</span> <span class="fu">BJSM_c</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">trialData</span>, xi_prior.mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  xi_prior.sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>, phi3_prior.sd <span class="op">=</span> <span class="fl">20</span>, n_MCMC_chain <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  n.adapt <span class="op">=</span> <span class="fl">1000</span>, MCMC_SAMPLE <span class="op">=</span> <span class="fl">5000</span>, ci <span class="op">=</span> <span class="fl">0.95</span>, n.digits <span class="op">=</span> <span class="fl">5</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">BJSM_result</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameter Estimation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Estimate   CI        CI_low      CI_high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> phi1        0.18249 0.95  0.0006807978  0.379878116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> phi3        3.99892 0.95  2.6841284334  5.261429201</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rho[1,1,1]  0.00963 0.95  0.0049383247  0.014804336</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rho[2,1,1]  0.06384 0.95  0.0332093416  0.092598324</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rho[1,2,1] -0.00259 0.95 -0.0064856037  0.001319847</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rho[2,2,1] -0.07026 0.95 -0.1049904289 -0.036711575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rho[1,1,2] -0.00259 0.95 -0.0064856037  0.001319847</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rho[2,1,2] -0.07026 0.95 -0.1049904289 -0.036711575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rho[1,2,2]  0.01125 0.95  0.0056024116  0.017182083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rho[2,2,2]  0.09147 0.95  0.0510124565  0.135088041</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xi_[1]     51.04569 0.95 47.1994113539 54.866772130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xi_[2]     62.05141 0.95 58.0385859130 65.652831191</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xi_[3]     69.02606 0.95 65.2219700790 72.586008100</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">BJSM_result</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Treatment Effect Estimation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Estimate   CI   CI_low  CI_high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> trtA 51.04569 0.95 47.19941 54.86677</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> trtB 62.05141 0.95 58.03859 65.65283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> trtC 69.02606 0.95 65.22197 72.58601</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sidi Wang, Kelley Kidwell, Michael Kleinsasser.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

